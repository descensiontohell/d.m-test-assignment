
### Тестовое задание для d. m.
Задача - разработать API на основе Django REST Framework для хранения информации о пользователях и их изображениях.
### Реализовано
 - Регистрация, авторизация пользователя
 - Эндпоинт для получения авторизованного пользователя
 - Эндпоинты для получения информации о пользователях, CRUD функционал для изображений
 - Эндпоинты для получения администратором всех изображений в системе и удаления их
 - Подготовлен конфиг `docker-compose.yml` для развертывания контейнеров одной командой
 - Документация к API в `/docs/` 
### Технические детали
Технологии: Python, Django REST Framework, PostgreSQL (Django ORM), nginx, Docker / docker-compose. Использованы библиотеки django-rest-registration для управления аккаунтами и drf-yasg для генерации Swagger

Пользователь может зарегистрироваться с помощью `POST /accounts/register/` и авторизоваться с помощью `POST /accounts/login/`. После авторизации можно добавить свое изображение с помощью `POST /users/{user_id}/images/`, указав `image_url`. С помощью `HEAD` запроса происходит проверка на то, что ссылка действительно ведет на изображение. 

Можно получить изображения пользователя с `GET /users/{user_id}/images/`. Пользователь имеет доступ к модификации и удалению своих изображений с `PATCH /users/{user_id}/images/{image_id}` и `DELETE /users/{user_id}/images/{image_id}` (администратор имеет доступ к изображениям всех пользователей).  

Администратор может получить список всех загруженных изображений через `GET /images/`, а так же удалить сразу все изображения сразу с `DELETE /images/`.
### Развертывание
Сервис развернут на http://213.202.238.224:7171/docs/

Локальное развертывание в Linux (требует установленный Python 3.9, алгоритм может меняться в зависимости от ОС):
1. Склонировать репозиторий 
```
git clone git@github.com:descensiontohell/d.m-test-assignment.git && cd d.m-test-assignment
```
2. Создать виртуальную среду и установить зависимости
```
virtualenv venv --python=3.9 && source venv/bin/activate
```
```
pip install -r requirements.txt
```
3. Собрать статику для сборки nginx
```
python gallery_backend/manage.py collectstatic
```
4. По желанию сменить креды администратора и базы данных
```
vim .env
```
5. Поднять контейнеры
```
docker-compose up
```
6. Перейти в http://localhost:6060/docs/

